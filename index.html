<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>PWA Talk</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Playfair+Display:400,700,700i|Work+Sans:300,400,700">
  <link rel="stylesheet" href="css/reveal.css">
  <link rel="stylesheet" href="css/theme/night.css">
  <!-- Theme used for syntax highlighting of code-->
  <link rel="stylesheet" href="lib/css/zenburn.css">
  <!-- Printing and PDF exports-->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
    
  </script>
  <link rel="stylesheet" href="css/overwrites.css">
</head>
<body> 
  <div class="reveal">
    <div class="slides">
      <section>
        <!-- Little Big Uno-->
          <section data-background-iframe="https://www.youtube.com/embed/CkIhFpdJcPM?start=65&amp;fs=0&amp;showinfo=0&amp;rel=0&amp;modestbranding=1&amp;autohide=1&amp;showinfo=0&amp;disablekb=1" data-background-interactive>
            <h2 class="shadowed">Progressive Web Apps!<sup>*</sup></h2>
            <div class="a-talk-by" style="margin-top:25.5vh;"><b class="white shadowed">(a talk by @AhoyLemon)</b><br><br>
              <div class="shadowed" style="font-size:26px; line-height:120%">* This talk is actually called "How To Make Your Website A Progressive Web App (And Why You Might Want To)", but that's entirely too long</div>
            </div>
          </section>
      </section>
      <section>
        <section>
          <h1>Hi!</h1>
          <h2 class="fragment">My name is Lemon.</h2>
          <p class="fragment">(I make websites.)</p>
        </section>
        <section>
          <div style="font-size:68px; font-family:'Lucida Console', Monaco, monospace;"> <span>websites </span><span class="fragment">!= apps</span></div>
        </section>
        <section>
          <h3>Let me define my terms.</h3>
        </section>
        <section>
          <div class="grid" columns="3">
            <div class="box"><img src="svg/logos/html-5.svg"></div>
            <div class="box"><img src="svg/logos/css-3.svg"></div>
            <div class="box"><img src="svg/logos/javascript.svg"></div>
          </div>
        </section>
        <section>
          <blockquote>
            <p>I want you to build me a website!</p>
            <cite>The Client</cite>
          </blockquote>
          <blockquote>
            <p>Sounds good.</p>
            <cite>me</cite>
          </blockquote>
        </section>
        <section>
          <blockquote>
            <p>I want you to build me a mobile app!</p>
            <cite>The Client</cite>
          </blockquote>
          <blockquote>
            <p>Okay, but based on what you're trying to do, a mobile app might not be the best solution. What about a website instead?</p>
            <cite>me</cite>
          </blockquote>
        </section>
        <section>
          <blockquote>
            <p>I want you to build me a mobile app, and I'll pay you a <strong>lot of money </strong>to do it.</p>
            <cite>The Client</cite>
          </blockquote>
          <blockquote>
            <p>Okay, let's build a mobile app.</p>
            <cite>me</cite>
          </blockquote>
        </section>
        <section>
          <div class="grid" columns="3">
            <figure><img src="svg/logos/cordova_256.png" style="width:100%"></figure>
            <figure></figure>
            <figure><img src="svg/logos/phonegap.svg" style="width:100%"></figure>
          </div>
        </section>
        <section>
          <p>Building an app in Cordova/phonegap..</p>
          <ol>
            <li>Build an HTML website.</li>
            <li>Wrap it in a vendor-specific webview.</li>
            <li>Add plugins.</li>
            <li>Release to the store.<sup>*</sup></li><i>* herein lies the problem.</i>
          </ol>
        </section>
        <section>
          <p>Actually, a few problems...</p>
          <ol>
            <li>app signing</li>
            <li>plugin versioning</li>
            <li>incompatable dependencies</li>
            <li>style & content rules</li>
            <li>changing rules</li>
            <li>possibility of rejection</li>
            <li>waiting</li>
          </ol>
        </section>
        <section>
          <blockquote><strong>From: </strong><span>Google Play Support</span><br><strong>To: </strong><span>me</span>
            <p>We have rejected your latest build from the Google Play Store, because it violates our policy on embedded YouTube videos.</p>
            <p>Please see this link that kind of sort of describes the policy.</p>
          </blockquote>
        </section>
        <section>
          <blockquote><strong>From: </strong><span>me</span><br><strong>To: </strong><span>Google Play Support</span>
            <p>Okay, thank you so much for your note. I am confused on the cause though, as my app does not have any embedded YouTube videos.</p>
            <p>Can you please explain?</p>
          </blockquote>
        </section>
        <section>
          <blockquote><strong>From: </strong><span>Google Play Support</span><br><strong>To: </strong><span>me</span>
            <p>The embedded YouTube videos in your app violate our policy on embedded YouTube videos.</p>
          </blockquote>
        </section>
        <section>
          <blockquote><strong>From: </strong><span>me</span><br><strong>To: </strong><span>Google Play Support</span>
            <p>Right... Except the app doesn't <i>have </i><span>any YouTube videos, of any sort.</span></p>
          </blockquote>
        </section>
        <section>
          <blockquote><strong>From: </strong><span>Google Play Support</span><br><strong>To: </strong><span>me</span><br>
            <p>We do not offer support.</p>
          </blockquote>
        </section>
        <section>
          <blockquote><strong>From: </strong><span class="strobe">Google Play Support</span><br><strong>To: </strong><span>me</span><br>
            <p>We do not offer <span class="strobe">support.</span></p>
          </blockquote>
        </section>
        <section>
          <p>
             This is a specific problem.<br>pointing to a greater concern.</p>
        </section>
        <section>
          <h2>The Internet is not a walled garden.</h2>
        </section>
      </section>
      <section>
        <section>
          <blockquote>
            <p>So, when you say you want a mobile app, what do you really want?</p>
            <cite>what I should have said</cite>
          </blockquote>
        </section>
        <section>
          <p>“I want something that...</p>
          <ul>
            <li>has an app-like interface</li>
            <li>can be installed on a user's machine</li>
            <li>will work offline</li>
            <li>uses camera & microphone</li>
            <li>geolocation</li>
            <li><strong>has push notifications</strong></li>
          </ul>
        </section>
        <section><img src="svg/pwa.svg"></section>
        <section>
          <p>A spec written by...</p>
          <div class="grid" columns="3" style="margin-bottom:2em;">
            <figure><img src="img/logos/chrome.png" style="max-height:20vh;"></figure>
            <figure><img src="img/logos/firefox.png" style="max-height:20vh;"></figure>
            <figure><img src="img/logos/edge.png" style="max-height:20vh;"></figure>
          </div>
          <div class="fragment">
            <p>Supported by</p>
            <div class="grid" columns="3">
              <figure><img src="img/logos/safari.png" style="max-height:20vh;"></figure>
              <figure><img src="img/logos/brave.png" style="max-height:20vh;"></figure>
              <figure><img src="img/logos/opera.png" style="max-height:20vh;"></figure>
            </div>
          </div>
        </section>
        <section>
          <p>What is a PWA?</p>
          <p class="fragment">Potentially a lot of things.</p>
        </section>
        <section>
          <p>What <b>can be</b> in a PWA?</p>
          <ul>
            <li>installable</li>
            <li>works offline</li>
            <li>notifications</li>
            <li>managed caching</li>
            <li>runs chromeless</li>
            <li>native sharing</li>
            <li>wake control</li>
            <li>multitouch</li>
            <li>bluetooth</li>
          </ul>
        </section>
        <section data-background="gif/gnome-fascinating.gif"></section>
        <section>
          <p>What do you need?</p>
          <ol>
            <li> <strong>HTTPS connection</strong></li>
            <li> <code>manifest.json</code></li>
            <li><code>service-worker.js</code></li>
          </ol>
        </section>
        <section>
          <p>Where can I get a HTTPS certificate?</p>
          <p> <i>PS: For free?</i></p>
          <ul>
            <li>GitHub Pages</li>
            <li>Let's Encrypt</li>
            <li>Cloudflare</li>
            <li>Many cPanel-based hosting platforms<br><sub>(personal rec's: Green Geeks & InMotion)</sub></li>
          </ul>
        </section>
        <section>
          <p>Regardless: get a cert, turn it on, and direct <i>all</i> HTTP traffic to HTTPS.</p>
        </section>
        <section><code>manifest.json</code>
          <p>A json file located in the root of your project, which will define some values...</p>
          <ul>
            <li>Name & Description</li>
            <li>Color Scheme</li>
            <li>Languages</li>
            <li>Orientation</li>
            <li>URL scope</li>
            <li>Icons</li>
          </ul>
          <!--pre(style="font-size:1.5rem;")
          code.json(style="max-height:55vh;").
            {
              "manifest_version": 2.01,
              "name": "damn dog",
              "short_name": "damndog",
              "description": "A guessing game for wikiHow illustrations.",
              "default_locale": "en",
              "display": "standalone",
              "scope": "/",
              "start_url": "/",
              "theme_color": "#222730",
              "background_color": "#222730",
              "icons": [
                {
                  "src": "/android-chrome-36x36.png",
                  "sizes": "36x36",
                  "type": "image/png"
                },
                {
                  "src": "/android-chrome-48x48.png",
                  "sizes": "48x48",
                  "type": "image/png"
                },
                {
                  "src": "/android-chrome-72x72.png",
                  "sizes": "72x72",
                  "type": "image/png"
                },
                {
                  "src": "/android-chrome-96x96.png",
                  "sizes": "96x96",
                  "type": "image/png"
                },
                {
                  "src": "/android-chrome-144x144.png",
                  "sizes": "144x144",
                  "type": "image/png"
                },
                {
                  "src": "/android-chrome-192x192.png",
                  "sizes": "192x192",
                  "type": "image/png"
                },
                {
                  "src": "/android-chrome-256x256.png",
                  "sizes": "256x256",
                  "type": "image/png"
                },
                {
                  "src": "/android-chrome-384x384.png",
                  "sizes": "384x384",
                  "type": "image/png"
                },
                {
                  "src": "/android-chrome-512x512.png",
                  "sizes": "512x512",
                  "type": "image/png"
                }
              ]
            }
          
          -->
        </section>
        <section><code>service-worker.js</code>
          <p>A single javascript file (can be called anything), which will set up functions for installation, caching, permissions, and features.</p>
          <!--pre(style="font-size:1.5rem;")
          code.js(style="max-height:55vh;").
          
            self.addEventListener('install', e => {
              // once the SW is installed, go ahead and fetch the resources
              // to make this work offline
              e.waitUntil(
                caches.open(cacheName).then(cache => {
                  return cache.addAll([
                    '/index.html',
                    // Put critical files here.
                  ]).then(() => self.skipWaiting());
                })
              );
            });
          
          -->
        </section>
        <section>
          <p>Reference both these files in your index.html</p>
        </section>
      </section>
      <section>
        <section>
          <div><img src="img/before-sw.png"></div>
          <div class="fragment"><img src="img/after-sw.png"></div>
        </section>
        <section>
          <p>The service worker gets its own lifecycle.</p>
        </section>
        <section><code>cachebusting...</code>
          <pre style="font-size:1.5rem;"><code class="html" style="max-height:55vh;">&lt;script src=&quot;site.min.js?updated=xwJEKgJfizi&quot;&gt;&lt;script&gt;
</code></pre>
        </section>
      </section>
      <section>
        <h2>Now, let's see some <span class="strobe">real-world examples</span></h2>
      </section>
      <section>
        <section>
          <figure><a href="https://partypartypartyparty.party" target="_blank"><img src="img/party-square.png" style="max-height:50vh;">
              <figcaption>partypartypartyparty.party</figcaption></a></figure>
        </section>
        <section>
          <blockquote>
            <p>I need to be able to party efficiently when I don't have internet.</p>
            <cite>a friend</cite>
          </blockquote>
          <blockquote class="fragment">
            <p>That's an excellent point!</p>
            <cite>me</cite>
          </blockquote>
        </section>
        <section><code>service-worker.js</code>
          <pre style="font-size:1.5rem;"><code class="js" style="max-height:55vh;">const offlineUrl = '/index.html';
const offlineFiles = [
  '/index.html',
  '/manifest.json',
  '/css/party.css',
  '/js/min/jquery.min.js',
  '/js/min/howler.min.js',
  '/js/min/party.min.js',
  '/audio/party.mp3',
  '/audio/venga.mp3'
];

/*****
On install, the service worker will take all our
required files, and store those locally. */
self.addEventListener('install', function(event) {
  var offlineRequest = new Request(offlineFiles);
  event.waitUntil(
    fetch(offlineRequest).then(function(response) {
      return caches.open('offline').then(function(cache) {
        return cache.put(offlineRequest, response);
      });
    })
  );
});

/************
Then, on a fetch request, the service worker 
will check for response.
If everything seems to be offline, serve the
offline files instead.  */
self.addEventListener('fetch', function(event) {
  var request = event.request;
  if (request.method === 'GET') {
    event.respondWith(
      fetch(request).catch(function(error) {
        console.error(
          '[onfetch] Failed. Serving cached offline fallback ' +
          error
        );
        return caches.open('offline').then(function(cache) {
          return cache.match(offlineUrl);
        });
      })
    );
  }
});
</code></pre>
        </section>
        <section><code>manifest.json</code>
          <pre style="font-size:1.5rem;"><code class="json" style="max-height:55vh;">{
  "manifest_version": 2,
  "name": "PARTY PARTY PARTY PARTY PARTY",
  "short_name": "PARTY",
  "description": "PARTY PARTY PARTY PARTY PARTY PARTY PART PARTY PARTY PARTY PARTY PARTY PARTY",
  "default_locale": "en",
  "display": "standalone",
  "scope": "/",
  "start_url": "/",
  "theme_color": "#d1d1d1",
  "background_color": "#d1d1d1",
  "icons": [
    {
      "src": "/icon-36x36.png",
      "sizes": "36x36",
      "type": "image/png"
    },
    {
      "src": "/icon-48x48.png",
      "sizes": "48x48",
      "type": "image/png"
    },
    {
      "src": "/icon-72x72.png",
      "sizes": "72x72",
      "type": "image/png"
    },
    {
      "src": "/icon-96x96.png",
      "sizes": "96x96",
      "type": "image/png"
    },
    {
      "src": "/icon-144x144.png",
      "sizes": "144x144",
      "type": "image/png"
    },
    {
      "src": "/icon-192x192.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "/icon-256x256.png",
      "sizes": "256x256",
      "type": "image/png"
    },
    {
      "src": "/icon-384x384.png",
      "sizes": "384x384",
      "type": "image/png"
    },
    {
      "src": "/icon-512x512.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ]
}
</code></pre>
        </section>
        <section><code>index.html</code>
          <pre style="font-size:1.5rem;"><code class="js" style="max-height:55vh;">// Register the service worker
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
    // Registration was successful
    console.log('ServiceWorker registration successful with scope: ', registration.scope);
  }).catch(function(err) {
    // registration failed :(
    console.log('ServiceWorker registration failed: ', err);
  });
}
</code></pre>
        </section>
        <section>
          <figure style="text-align:center;"><img src="img/party-install-prompt.jpg" style="max-height:60vh; margin-left:auto; margin-right:auto;"></figure>
        </section>
        <section>
          <div class="grid" columns="2">
            <figure style="text-align:center;"><img src="img/home-screen.jpg" style="max-height:60vh; margin-left:auto; margin-right:auto;"></figure>
            <figure style="text-align:center;"><img src="img/app-screen.jpg" style="max-height:60vh; margin-left:auto; margin-right:auto;"></figure>
          </div>
        </section>
        <section>
          <div class="grid" columns="2">
            <figure style="text-align:center;"><img src="img/party-splash.jpg" style="max-height:60vh; margin-left:auto; margin-right:auto;"></figure>
            <figure style="text-align:center;"><img src="img/party-focus.jpg" style="max-height:60vh; margin-left:auto; margin-right:auto;"></figure>
          </div>
        </section>
        <section><img src="img/app-switch.jpg" style="max-height:60vh; margin-left:auto; margin-right:auto;"></section>
      </section>
      <section>
        <section>
          <h2>TESTING</h2>
        </section>
        <section>
          <figure><img src="img/lighthouse-1024x1024.png" style="max-height:55vh;">
            <figcaption><a href="https://web.dev/measure/" target="_blank">web.dev/measure</a></figcaption>
          </figure>
        </section>
        <section>
          <figure><img src="img/lighthouse-before.png"></figure>
        </section>
        <section>
          <figure><img src="img/lighthouse-after.png"></figure>
        </section>
      </section>
      <section>
        <section><a href="https://damn.dog" target="_blank"><img src="img/damn-og-wide.png"></a></section>
        <section><code>service-worker.js</code>
          <pre style="font-size:1.5rem;"><code class="js" style="max-height:55vh;">const cacheName = 'v2.17';
const offlineUrl = '/offline.html';
const offlineFiles = [
  '/index.html',
  '/offline.html',
  '/manifest.json',
  '/css/damn.css',
  '/js/libraries/vue.min.js',
  '/js/min/damn.min.js',
  '/svg/offline-dog.svg'
];

self.addEventListener('install', function(event) {
  event.waitUntil(
    caches.open(cacheName).then(function(cache) {
      return cache.addAll(cacheName);
    })
  );
});

// A lot of the same code goes as before goes here.
</code></pre>
        </section>
        <section><img src="img/screenshots/damn-install-chrome.png"></section>
        <section><img src="img/screenshots/damn-self-app.png"></section>
        <section><img src="img/screenshots/damn-offline-full.png"></section>
        <section><img src="img/logos/winstore.jpg"></section>
        <section data-background="img/screenshots/damn-winstore.png">
          <!--img(src="img/screenshots/damn-winstore.png")-->
        </section>
        <section data-background-video="video/fancy-omar.mp4" data-background-video-loop="loop" data-background-size="contain">
          <!--h3.shadowed Let's get even fancier-->
          <figure><img src="img/fancier.png" style="max-width:600px;"></figure>
        </section>
        <section><img src="img/screenshots/damn-sidebar-open.png"></section>
        <section><img src="img/screenshots/damn-sidebar-circled.png"></section>
        <section>
          <p>The Notification API</p>
        </section>
        <section><code>serviceworker.js</code>
          <pre style="font-size:1.5rem;"><code class="js" style="max-height:55vh;">// After the install code...

Notification.requestPermission(result => {
  if (result === 'granted') {
    //permission granted.
    navigator.serviceWorker.ready.then(registration => {
      registration.showNotification(
        'Damn Dog has been updated!', {
        icon: '/android-chrome-96x96.png',
        //vibrate: [500, 100, 500],
        body: '7 new rounds have been added to damn.dog,
               bringing the total up to 358.',
        tag: 'game-updated'
      });
    });
  }
});
</code></pre>
        </section>
        <section>
          <figure><img src="img/pwa-notification.png"></figure>
        </section>
        <section>
          <figure><img src="img/screenshots/producthunt.gif"></figure>
        </section>
        <section>
          <p> <strong>Q: </strong>How do I push to users not currently on the website?</p>
          <div class="fragment">
            <p> <strong>A: </strong>The same way you'd handle any other kind of push subscription</p>
            <ul>
              <li>Firebase</li>
              <li>Twilio</li>
              <li>OneSignal</li>
              <li>etc.</li>
            </ul>
          </div>
        </section>
      </section>
      <section>
        <section>
          <h3>Where do you go from here?</h3>
        </section>
        <section data-background="img/gif/cooking.gif">
          <h2 class="shadowed" style="margin-top:30vh">Get cooking!</h2>
        </section>
        <section>
          <figure><a href="https://www.pwabuilder.com/" target="_blank"><img src="img/logos/pwa-builder.png" style="margin-bottom:3em;"></a>
            <figcaption>by Microsoft</figcaption>
          </figure>
        </section>
        <section>
          <figure><a href="https://serviceworke.rs" target="_blank"><img src="img/logos/mozilla-serviceworkrs.svg"></a></figure>
        </section>
        <section>
          <figure><a href="https://web.dev/pwa" target="_blank"><img src="img/logos/webdev.svg" style="margin-bottom:3em;"></a>
            <figcaption>
              <by>by Google</by>
            </figcaption>
          </figure>
        </section>
        <section>
          <figure>
            <h2><a href="https://whatpwacando.today/" target="_blank">What PWA Can<br>Do Today</a></h2>
            <figcaption>by Danny Moerkerke</figcaption>
          </figure>
        </section>
        <section>
          <figure>
            <h2><a href="https://pwafire.org/" target="_blank">PWA Fire</a></h2>
            <figcaption>by Maye Edwin & Marta Wiśniewska</figcaption>
          </figure>
        </section>
      </section>
      <section>
        <section>
          <figure><a href="https://serviceworkies.com" target="_blank"><img src="img/logos/serviceworkies.png"></a>
            <figcaption>by Dave Geddes</figcaption>
          </figure>
        </section>
      </section>
      <section>
        <section>
          <p>When thinking of</p>
          <h2>Progressive Web Apps</h2>
          <div class="fragment">
            <h2>^^^^^^^^^^ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp;  &nbsp;  &nbsp; &nbsp;  &nbsp;</h2>
          </div>
        </section>
      </section>
      <section>
        <section data-background="img/bg/mpls-1.jpg"></section>
        <section data-background="img/bg/mpls-fire.jpg"></section>
        <section data-background="img/bg/floyd-memorial.jpg"></section>
      </section>
      <!-- THANK YOU-->
      <section>
        <section data-background="img/gif/simone_lemon_maker_faire.gif">
          <h1 class="white" style="padding-top:40vh; text-shadow:0.05em 0.05em 0.05em black, -1px -1px 1px black">Thank you.</h1>
          <p class="white shadowed"><a href="https://ahoylemon.xyz" target="_blank"> <strong>ahoylemon.xyz</strong></a></p>
        </section>
        <section data-background="#e6e924">
          <figure><img src="svg/lemon.svg" style="width:212px; height:212px;"></figure>
        </section>
      </section>
    </div>
  </div>
  <script src="lib/js/head.min.js"></script>
  <script src="js/reveal.js"></script>
  <script>
    // More info about config & dependencies:
    // - https://github.com/hakimel/reveal.js#configuration
    // - https://github.com/hakimel/reveal.js#dependencies
    Reveal.initialize({
      history: true,
      autoPlayMedia: true,
      //slideNumber: true,
      dependencies: [
      { src: 'plugin/markdown/marked.js' },
      { src: 'plugin/markdown/markdown.js' },
      { src: 'plugin/zoom-js/zoom.js' },
      { src: 'plugin/notes/notes.js', async: true },
      { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
      ]
    });
  </script>
</body>